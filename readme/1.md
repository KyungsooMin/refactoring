- 프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다.


## 수정할 부분
1. 청구내역 출력
2. 연극 장르와 공연료 정책 변경

## 리팩터링의 첫 단계
- 리팩터링할 영역을 꼼꼼하게 검사해줄 테스트 코드들이 필요하다

## Statement의 statement메서드 쪼개기
- switch문 쪼개기
- 해당 스위치문은 한 번의 공연에 대한 요금을 계산하는 용도이다.
- 코드 조각을 별도의 메서드로 추출하고 그 코드가 하는 일을 설명하는 이름을 지어준다.
- 별도 함수로 빼냈을 때 유효 범위를 벗어나는 변수, 즉 새 메서드에서 곧바로 사용할 수 없는 변수가 있는지 확인한다.
  - 해당 예제에서는 thisAmount, playId, inv가 해당한다.
  - playId와 inv는 추출한 새 메서드에서도 필요하지만 값을 변경하지는 않기 때문에 매개변수로 전달.
  - 하지만 thisAmount는 메서드에서 값이 바뀌기 때문에 조심해야한다.
    - 이번 예제에서는 이렇게 값이 변하는 변수가 하나이므로 이 값을 반환하도록 작성한다.
    - 추가적으로 해당 변수를 초기화 하는 코드도 추출한 메서드 안에 넣었다.
- 함수를 추출했다면 추출된 함수를 들여다보면서 지금보다 명확하게 표현할 수 있는 간단한 방법은 없는지 검토한다.
  - 우선 변수의 이름을 명확하게 변경한다. thisAmount -> result
  

- play변수 제거
  - play는 개별 공연(inv)에서 오기 때문에 애초에 매개변수로 전달할 필요가 없이 amountFor()안에서 다시 계산하면 된다.
  - 이런 임시 변수들은 추출 작업을 복잡하게 만든다.